<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: process.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">process.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;csignal&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
</div>
<p><a href="process_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab7f61bda0df6330eb1753311c3926de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a> (int sig)</td></tr>
<tr class="separator:ab7f61bda0df6330eb1753311c3926de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a32b2c07bf2f64897de048c86e709760f"><td class="memItemLeft" align="right" valign="top">struct timespec&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a32b2c07bf2f64897de048c86e709760f">delta</a> = {0 , 300000000 }</td></tr>
<tr class="separator:a32b2c07bf2f64897de048c86e709760f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7441ef0865bcb3db9b8064dd7375c1ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a></td></tr>
<tr class="separator:a7441ef0865bcb3db9b8064dd7375c1ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a725f40dde867526fdb20dc6794861022"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a725f40dde867526fdb20dc6794861022">process_output</a></td></tr>
<tr class="separator:a725f40dde867526fdb20dc6794861022"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab7f61bda0df6330eb1753311c3926de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7f61bda0df6330eb1753311c3926de0">&#9670;&nbsp;</a></span>coming_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void coming_signal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method handles signals for processes. For every signal it prints different outputs to file. </p>
<p>If process gets SIGHUP signal then it prints given message.</p>
<p>If process gets SIGINT signal then it prints given message.</p>
<p>If process gets SIGILL signal then it prints given message.</p>
<p>If process gets SIGTRAP signal then it prints given message.</p>
<p>If process gets SIGFPE signal then it prints given message.</p>
<p>If process gets SIGSEGV signal then it prints given message.</p>
<p>If process gets SIGTERM signal then it prints given message. And terminates the process.</p>
<p>If process gets SIGXCPU signal then it prints given message.</p>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00018">18</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                           {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    ofstream process_output_file;   <span class="comment">// Out stream object for writing process output to file.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    process_output_file.open (<a class="code" href="process_8cpp.html#a725f40dde867526fdb20dc6794861022">process_output</a>,ios::app); <span class="comment">// Opening the stream object in append mode.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span>(sig == 1){</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; endl;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    }</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sig == 2){</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; endl;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    }</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sig == 4){</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; endl;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sig == 5){</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; endl;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sig == 8){</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; endl;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    }</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sig == 11){</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; endl;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sig == 15){</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; <span class="stringliteral">&quot;, terminating gracefully&quot;</span>&lt;&lt; endl;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        exit(sig);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sig == 24){</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; sig &lt;&lt; endl;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    process_output_file.close();    <span class="comment">// Closing stream to prevent inconvinient results. </span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="ttc" id="aprocess_8cpp_html_a725f40dde867526fdb20dc6794861022"><div class="ttname"><a href="process_8cpp.html#a725f40dde867526fdb20dc6794861022">process_output</a></div><div class="ttdeci">string process_output</div><div class="ttdef"><b>Definition:</b> <a href="process_8cpp_source.html#l00015">process.cpp:15</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This main initializes each process. First it takes arguments from execl() function written in watchdog. Then opens the output stream writes given message After that it goes to sleep mode and waits for signals. </p>
<p>If process gets SIGHUP signal then it goes to coming_signal function with the SIGHUP parameter .</p>
<p>If process gets SIGINT signal then it goes to coming_signal function with the SIGINT parameter .</p>
<p>If process gets SIGILL signal then it goes to coming_signal function with the SIGILL parameter .</p>
<p>If process gets SIGTRAP signal then it goes to coming_signal function with the SIGTRAP parameter .</p>
<p>If process gets SIGFPE signal then it goes to coming_signal function with the SIGFPE parameter .</p>
<p>If process gets SIGSEGV signal then it goes to coming_signal function with the SIGSEGV parameter .</p>
<p>If process gets SIGTERM signal then it goes to coming_signal function with the SIGTERM parameter .</p>
<p>If process gets SIGXCPU signal then it goes to coming_signal function with the SIGXCPU parameter .</p>
<p>To keep process idle. Sleep function does not worked here. I don't know why.</p>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00060">60</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">id</span> = atoi(argv[1]); <span class="comment">// It stores the id of the process which is P&lt;id&gt;.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="process_8cpp.html#a725f40dde867526fdb20dc6794861022">process_output</a> = argv[2];   <span class="comment">// It stores the path of the output file.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    ofstream process_output_file;   <span class="comment">// Out stream object for writing process output to file.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    process_output_file.open (<a class="code" href="process_8cpp.html#a725f40dde867526fdb20dc6794861022">process_output</a>,ios::app); <span class="comment">// Opening the stream object in append mode.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    process_output_file &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot; is waiting for a signal&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    process_output_file.close();    <span class="comment">// Closing stream to prevent inconvinient results. </span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    signal(SIGHUP,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    signal(SIGINT,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    signal(SIGILL,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    signal(SIGTRAP,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    signal(SIGFPE,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    signal(SIGSEGV,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    signal(SIGTERM,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    signal(SIGXCPU,<a class="code" href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">while</span>(<span class="keyword">true</span>){</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="ttc" id="aprocess_8cpp_html_ab7f61bda0df6330eb1753311c3926de0"><div class="ttname"><a href="process_8cpp.html#ab7f61bda0df6330eb1753311c3926de0">coming_signal</a></div><div class="ttdeci">void coming_signal(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="process_8cpp_source.html#l00018">process.cpp:18</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a32b2c07bf2f64897de048c86e709760f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32b2c07bf2f64897de048c86e709760f">&#9670;&nbsp;</a></span>delta</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timespec delta = {0 , 300000000 }</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>0.3 sec </p>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00001">1</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>

</div>
</div>
<a id="a7441ef0865bcb3db9b8064dd7375c1ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7441ef0865bcb3db9b8064dd7375c1ea">&#9670;&nbsp;</a></span>id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int id</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>It stores the id of processes which is P&lt;id&gt;. </p>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00014">14</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>

</div>
</div>
<a id="a725f40dde867526fdb20dc6794861022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a725f40dde867526fdb20dc6794861022">&#9670;&nbsp;</a></span>process_output</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string process_output</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>It stores process output file path. </p>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00015">15</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
